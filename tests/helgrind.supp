#
# The following suppressions are suited for debug build
# of librpma on Ubuntu 20.04 used in the CircleCI.
# They may not work for any other OS, OS version,
# rdma-core version and for the release build.
#

#
# Assessment: These suppressions indicate a lack of MT safety.
#

{
   Race while reading the name of time zone ("GMT").
   Helgrind:Race
   ...
   fun:syslog
   fun:rpma_log_default_function
   ...
}

{
   Race while reading the name of time zone ("GMT").
   Helgrind:Race
   ...
   fun:get_timestamp_prefix
   fun:rpma_log_default_function
   ...
}

{
   Possible data race during read/write in rpma_utils_get_ibv_context()
   Helgrind:Race
   ...
   fun:rpma_utils_get_ibv_context
   ...
}

#
# Assessment: These suppressions do not indicate a lack of MT safety.
#
# For details please see drd.supp.
#

{
   Possible data race during write of size 4
   Helgrind:Race
   fun:ucma_init
   ...
}

#
# Assessment: XXX required
#

{
   Possible data race during read of size 4 (multithreaded-mr-rpma_mr_reg_0_helgrind)
   Helgrind:Race
   fun:ibv_dontfork_range
   fun:ibv_reg_mr_iova*
   fun:__ibv_reg_mr
   fun:rpma_peer_mr_reg
   fun:rpma_mr_reg
   ...
}

{
   Possible data race during read of size 4 (multithreaded-mr-rpma_mr_reg_0_helgrind)
   Helgrind:Race
   fun:ibv_dofork_range
   fun:ibv_dereg_mr*
   fun:rpma_mr_dereg
   ...
}

{
   Possible data race during write of size 8 in bitmap_set_bit (multithreaded-conn-rpma_conn_req_new_0_helgrind)
   Helgrind:Race
   ...
   fun:_execute_ioctl_fallback
   fun:ibv_icmd_create_cq
   fun:ibv_cmd_create_cq
   fun:rxe_create_cq
   fun:ibv_create_cq@@IBVERBS_1.1
   fun:rpma_cq_new
   fun:rpma_conn_req_from_id
   fun:rpma_conn_req_new
   ...
}

{
   Possible data race during read of size 8 in bitmap_set_bit (multithreaded-conn-rpma_conn_req_new_0_helgrind)
   Helgrind:Race
   ...
   fun:_execute_ioctl_fallback
   fun:ibv_cmd_destroy_cq
   fun:rxe_destroy_cq
   fun:ibv_destroy_cq@@IBVERBS_1.1
   fun:rpma_cq_delete
   fun:rpma_conn_req_delete
   ...
}